# omc-munger

## What it does
omc-munger takes a directory of text files, where each file is an output file
generated by the [QIIME](http://qiime.org) 1.9.1 [observation_metadata_correlation.py](http://qiime.org/scripts/observation_metadata_correlation.html)
script. Each output file contains the results for a specific category. Each
filename must conform to the following format:

```shell
corr_<category>.txt
```

where ``<category>`` is the name of the category that
observation_metadata_correlation.py was run on.

omc-munger creates a TSV file where each line reports a category's significant
observation IDs. The file is in the following format:

```
Category   Count significant  Significant observation IDs
category1  1                  OTU1 (0.42, 0.02)
category2  2                  OTU2 (0.25, 0.01), OTU3 (0.19, 0.04)
...
```

``Category`` is the name of the category.

``Count significant`` is the number of significant observation IDs. This column
is useful to sort on because the categories (i.e., rows) aren't in any
particular order.

``Significant observation IDs``is a comma-separated list of observation IDs
that are significantly correlated with the category. The original (uncorrected) p-values are multiplied by the total number of tests performed (across all
files in the input directory). These Bonferroni-corrected p-values are compared
against the alpha provided as input to the script (e.g., 0.05) in order to
determine significance. The test statistic (e.g., correlation coefficient) and Bonferroni-corrected p-value are included in parentheses next to each
observation ID. The observation IDs are ordered most significant -> least
significant.

Categories without any significant observation IDs are not included in the
output file.

## How to use it
Download the omc-munger.py script included in this repository. Run it on a
directory containing observation_metadata_correlation.py results, providing an
output filepath and an alpha:

```shell
python omc-munger.py <input directory> <output filepath> <alpha>
```

For example:

```shell
python omc-munger.py omc-results output.txt 0.05
```

The input directory is ``omc-results``, the results will be written to
``output.txt``, and an alpha of 0.05 is used.
